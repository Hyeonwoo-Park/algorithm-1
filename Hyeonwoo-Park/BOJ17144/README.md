# BOJ 17144번 [미세먼지 안녕!](noj.am/17144)

## 🌈 풀이 후기
- 100줄짜리 코드 제출했을때, 한번에 돌아가면 기분 완전 좋은 그런 문제.
- 조금 자잘한 아이디어는 몇개 들어갔습니다.
- 처음엔 q에 넣어서 푸는게 좋을것 같았는데, 1 cycle 돌린 다음, i*j 돌며 큐에 넣는 작업을 해야해서 바꿨습니다.
## 👩‍🏫 문제 풀이
- 기본적으로 i*j 를 T번 돌며,
    - 0 초과의 먼지를 만났을 때, 확산 작업을 수행합니다.
        - 이때, 지금까지 지나온 길은 바로 `room[][]`을 갱신하고, 
        - 앞으로 지나갈 길은 `temp[][]` 배열에 임시로 값을 넣어 뒀다가,
        - 이후 그 cell에 연산을 수행 한 다음 갱신합니다.
            - (확산이 동시에 일어나야 하기 때문에)
    - 이후, 공기 청정을 시작합니다.
        - 공기청정기 위, 아래 순으로 진행하며,
        - 실제 도는 방향의 반대로 탐색하며, 해당 cell의 먼지를 가져옵니다.
        - 한 방향으로 계속 탐색하다가, 범위를 초과한 경우 회전합니다.
- T번의 작업을 마무리 한 후, i * j 를 다시 탐색하며 먼지의 총량을 구합니다.
    - 위 작업에서 모든 먼지의 총량을 구해놓은 뒤,
    - 공기청정기에 의해 제거되는 양만 감산해도 된다고 생각합니다.
    - 저는 공기청정기에 먼지가 들어가는 부분을 간단하게 짜서, 그냥 한번 더 탐색했습니다.

### 주요 코드
```java
void defuse(){
    ...
    if (i < 2)
        temp[X][Y] += dust;
    else
        room[X][Y] += dust;

    room[x][y] -= dust;
}
```
- 방향을 우, 하, 좌, 상 순으로 진행하여,
    - 우, 하의 경우는 이후 다시 방문할 예정이므로 `temp[][]`에 넣었습니다.

```java
int tb = i == 0 ? 1 : -1;                   //공기청정기의 위 아래.
int ceil = i == 0 ? 0 : x;                  //위쪽 범위
int floor = i == 0 ? x + 1 : R;             //아래쪽 범위

while (true) {
    int nx = x + dx[dir];
    int ny = y + dy[dir];
    
    if (nx < ceil || ny < 0 || nx >= floor || ny >= C) {    //범위를 초과한 경우
        dir += tb;                                          //회전

        if (dir == -1)        
            dir = 3;

        dir %= 4;

        continue;
    }

    if (room[nx][ny] == -1)                                 //공기청정기에 도착하면
        break;                                              //loop 종료

    room[x][y] |= room[nx][ny];                             //먼지 이동
    room[nx][ny] = 0;                                       //이동한 칸 비우기

    x = nx;
    y = ny;
}
```
- 자바의 경우, 음수 모듈러가 이상하게 나와서 따로 처리해주었습니다.
    - ( -1 % 4 ) == -1
- 이동을 bit or로 진행하였는데,
    - 일반적인 칸의 경우, `room[x][y]`의 값이 0이므로, 일반 = 과 같이 동작합니다.
    - 공기 청정기의 경우, `room[x][y]`의 값이 -1 이므로,
        - 이는 bit값 1111....1111 에 해당하는데,
        - 이 값에 어떤 값을 or 연산하든, 무조건 1111...1111 이 나오게 됩니다.
        - 따라서 공기 청정기에 의해 먼지가 사라지는 것과 같은 의미입니다.